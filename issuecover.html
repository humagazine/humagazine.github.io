<!doctype html>
<html lang="en">

  <head>
    <title>hUmagazine</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- CSS loaders -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/style1.css" media="none" id="cssstyle1">
    <link rel="stylesheet" href="css/style2.css" media="none" id="cssstyle2">
    <link rel="stylesheet" href="css/style3.css" media="none" id="cssstyle3">
    <link rel="stylesheet" href="css/style4.css" media="none" id="cssstyle4">

    <!-- Load jQuery -->
    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Load our JS Library -->
    <script language="javascript" src="js/llll.js"></script>

  </head>


  <body>

    <!-- <div class="container-fluid">MAIN CONTAINER -->

      <!-- TOP BAR -->
      <div id="topBar" class="sticky-top"></div> <!-- A jQuery function loads content inside this div -->

      <!-- HOMEPAGE ROW -->
      <main id="coverstyle1" class="container-fluid justify-content-md-center my-4"> <!-- container-small is a CUSTOM class defined in main.css -->
       <!-- align-items-start-->
        <div class="row g-5">
          <div id="coverLeft" class="col col-md-3">
          </div>

          <div class="col col-md-6">
              <div id="cover1">
              <div id="issueMeta">
              <p><span class="metaTitle">Number: </span><span id="issueN"></span></p>
              <p><span class="metaTitle">Topic: </span><span id="issueTopic"></span></p>
              <p><span class="metaTitle">Editor: </span><span id="issueEditor"></span></p>
              <p><span class="metaTitle">Date: </span><span id="issueDate"></span></p>
               </div>
              </div>
              <br/>

              <div id="issueArticles">
              <div>In this number:</div>
              <br/>
              <div id="artMetaDiv">
              <ol class="list-group-numbered text-left olCustom" align="left">
                <div class="containerMeta">
                <li id="art1" class="list-group-item border-0 coverCustom">
                  <span class="artTitle"></span><span id="artN1"></span>,
                  <span class="artMeta"></span><span id="artN1Aut"></span>,
                  <span class="artMeta"> from </span><span id="artN1Mag"></span>,
                  <span class="artMeta"></span><span id="artN1Date"></span><br/>
                  <span class="artMeta"></span><span id="artN1KW1" class="card-subtitle text-muted"></span> <span class="artMeta"></span><span id="artN1KW2" class="card-subtitle text-muted"></span> <span class="artMeta"></span><span id="artN1KW3" class="card-subtitle text-muted"></span>
                </li>
              </div>
              <div class="containerMeta">
                <li id="art2" class="list-group-item border-0 coverCustom">
                  <span class="artTitle"></span><span id="artN2"></span>,
                  <span class="artMeta"></span><span id="artN2Aut"></span>,
                  <span class="artMeta"> from </span><span id="artN2Mag"></span>,
                  <span class="artMeta"></span><span id="artN2Date"></span><br/>
                  <span class="artMeta"></span><span id="artN2KW1" class="card-subtitle text-muted"></span> <span class="artMeta"></span><span id="artN2KW2" class="card-subtitle text-muted"></span> <span class="artMeta"></span><span id="artN2KW3" class="card-subtitle text-muted"></span>
                </li>
              </div>
              <div class="containerMeta">
                <li id="art3" class="list-group-item border-0 coverCustom">
                  <span class="artTitle"></span><span id="artN3"></span>,
                  <span class="artMeta"></span><span id="artN3Aut"></span>,
                  <span class="artMeta"> from </span><span id="artN3Mag"></span>,
                  <span class="artMeta"></span><span id="artN3Date"></span><br/>
                  <span class="artMeta"></span><span id="artN3KW1" class="card-subtitle text-muted"></span> <span class="artMeta"></span><span id="artN3KW2" class="card-subtitle text-muted"></span> <span class="artMeta"></span><span id="artN3KW3" class="card-subtitle text-muted"></span>
                </li>
              </div>
              </ol>
              </div>
              <div id="openIssue"></div>
              </div>
              <br/><br/>
          </div>
          <div class="col col-md-3"></div>
        </div>


      </main> <!-- End container -->

      <!-- FOOTER -->
      <div id="footerBar"></div>

    <!-- </div> -->


    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script type="text/javascript">
      //var issuesDet = JSON.parse(fs.readFileSync("issuesDb.json"));

      const urlParams = new URLSearchParams(window.location.search);
      const issueNumber = urlParams.get('number');
      // console.log(issueNumber);

      // Adds one link to the menu for each issue contained in the issuesDb.json file
      $.getJSON('./issuesDb.json', function(objson){
                //console.log(objson.topic);
                for (const jsonissue of objson.issues) {

                  if (jsonissue.number==issueNumber) {

                    $("#issueN").append(jsonissue.number);
                    $("#issueTopic").append(jsonissue.topic);
                    $("#issueEditor").append(jsonissue.editor);
                    $("#issueDate").append(jsonissue.date);
                    $("#artN1").append(jsonissue.art1);
                    $("#artN1Mag").append(jsonissue.art1Mag);
                    $("#artN1Aut").append(jsonissue.art1Aut);
                    $("#artN1Date").append(jsonissue.art1Date);
                    $("#artN1KW1").append(jsonissue.art1KW1);
                    $("#artN1KW2").append(jsonissue.art1KW2);
                    $("#artN1KW3").append(jsonissue.art1KW3);
                    $("#artN2").append(jsonissue.art2);
                    $("#artN2Mag").append(jsonissue.art2Mag);
                    $("#artN2Aut").append(jsonissue.art2Aut);
                    $("#artN2Date").append(jsonissue.art2Date);
                    $("#artN2KW1").append(jsonissue.art2KW1);
                    $("#artN2KW2").append(jsonissue.art2KW2);
                    $("#artN2KW3").append(jsonissue.art2KW3);
                    $("#artN3").append(jsonissue.art3);
                    $("#artN3Mag").append(jsonissue.art3Mag);
                    $("#artN3Aut").append(jsonissue.art3Aut);
                    $("#artN3Date").append(jsonissue.art3Date);
                    $("#artN3KW1").append(jsonissue.art3KW1);
                    $("#artN3KW2").append(jsonissue.art3KW2);
                    $("#artN3KW3").append(jsonissue.art3KW3);
                    $("#openIssue").append('<button id="btnIssue" class="btn btn-link m-3" width="20" height="20"><a href="issue.html?number=' + issueNumber + '">Start reading...</a></button>');
                  }

                }
            }).fail(function(){
                console.log("Get from issueDb: an error has occurred.");
            });
    </script>



  </body>

<!-- Script Loaders-->


</html>
